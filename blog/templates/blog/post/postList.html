{% extends 'blog/base.html' %}


{% block title %} Blogs {% endblock title %}


{% block content %}
    <h1> My Blog</h1>

    
    {% if tag %}
        <h2> Posts tagged with "{{ tag.name }}" </h2>
    {% endif %}
    {% for post in posts  %}
        <h3> 
            <a href="{{ post.get_absolute_url }}">
                {{ post.title }}
            </a>
        </h3>

        <p class="tags">
            Tags: 
            
            {% for tag in post.tags.all %}
                <a href="{% url 'blog:postList_by_tag' tag.slug %}">{{ tag.name }}</a>

                {% if not loop.last %}, {% endif %}
                
            {% endfor %}
        </p>



        <P class="date">
            Published on {{ post.publish }} by {{ post.author }}
        </p>
            

        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
              {% if post.image %}
                <div class="carousel-item active">
                  <img class="d-block w-100" src="{{ post.image.url }}" alt="{{ post.title }}">
                </div>
              {% endif %}
              {% for postimage in post.postimage_set.all %}
                <div class="carousel-item">
                  <img class="d-block w-100" src="{{ postimage.image.url }}" alt="{{ post.title }}">
                </div>
              {% endfor %}
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"  data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"  data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
          


        <p>
            {{ post.body | truncatewords_html:30 | safe | linebreaks }}
            <a href="{{ post.get_absolute_url }}">Read more</a>
        </P>

    {% endfor %}
     
    {% include 'blog/pagination.html' with page=posts %}

        
{% endblock content %}


    
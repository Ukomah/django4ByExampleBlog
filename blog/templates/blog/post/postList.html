{% extends 'blog/base.html' %}


{% block title %} Blogs {% endblock title %}


{% block content %}
    <h1> My Blog</h1>

    
    {% if tag %}
        <h2> Posts tagged with "{{ tag.name }}" </h2>
    {% endif %}
    {% for post in posts  %}
        <h3> 
            <a href="{{ post.get_absolute_url }}">
                {{ post.title }}
            </a>
        </h3>

        <p class="tags">
            Tags: 
            
            {% for tag in post.tags.all %}
                <a href="{% url 'blog:postList_by_tag' tag.slug %}">{{ tag.name }}</a>

                {% if not loop.last %}, {% endif %}
                
            {% endfor %}
        </p>



        <P class="date">
            Published on {{ post.publish }} by {{ post.author }}
        </p>
            
        {% if post.image %}
            <img class="img-fluid img-thumbnail"  src="{{ post.image.url }}" alt="{{ post.title }}">
        {% endif %}
        <p>
            {{ post.body | truncatewords_html:30 | safe | linebreaks }}
            <a href="{{ post.get_absolute_url }}">Read more</a>
        </P>

    {% endfor %}
     
    {% include 'blog/pagination.html' with page=posts %}

        
{% endblock content %}


    